<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Select Category - QuizHub</title>
<style>
*{box-sizing:border-box;}
body{font-family:Arial,sans-serif;background:#0f1112;color:#cfc5b8;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;padding:15px;}
.card{background:#24201c;padding:30px;border-radius:14px;width:100%;max-width:500px;text-align:center;box-shadow:0 6px 30px rgba(2,2,2,0.6);}
@media(max-width:480px){.card{padding:20px;}.categories{grid-template-columns:1fr!important;}.category-btn{padding:15px 12px;}.cat-icon{font-size:24px!important;}}
h2{color:#d9b78a;margin-bottom:5px;}
.subtitle{color:rgba(255,255,255,0.5);font-size:14px;margin-bottom:20px;}
.mode-badge{display:inline-block;padding:5px 12px;border-radius:20px;font-size:12px;margin-bottom:15px;background:linear-gradient(90deg,#5a8bb6,#8ad9d9);}
.categories{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin:20px 0;}
.category-btn{background:rgba(255,255,255,0.03);padding:20px 15px;border-radius:12px;border:2px solid transparent;color:#cfc5b8;cursor:pointer;transition:all 0.2s;text-align:center;}
.category-btn:hover{background:rgba(255,255,255,0.08);transform:translateY(-2px);}
.category-btn.selected{border-color:#d9b78a;background:rgba(217,183,138,0.1);}
.cat-icon{font-size:32px;display:block;margin-bottom:8px;}
.cat-name{font-size:14px;font-weight:600;}
.cat-count{font-size:11px;color:rgba(255,255,255,0.4);margin-top:4px;}
.btn{width:100%;padding:14px;margin-top:15px;border-radius:10px;border:none;background:linear-gradient(90deg,#5a8bb6,#8ad9d9);color:#fff;font-weight:600;cursor:pointer;font-size:16px;transition:transform 0.2s;}
.btn:hover{transform:scale(1.02);}
.btn:disabled{opacity:0.5;cursor:not-allowed;}
.btn-back{background:#3a3632;margin-top:10px;}
.random-btn{background:linear-gradient(90deg,#b68b5a,#d9b78a);}
</style>
</head>
<body>
<div class="card">
  <div class="mode-badge" id="modeBadge">üéÆ Classic Mode</div>
  <h2>üìö Select Category</h2>
  <p class="subtitle">Choose a topic to test your knowledge</p>
  
  <div class="categories" id="categoryGrid"></div>
  
  <button class="btn random-btn" onclick="startRandom()">üé≤ Random Category</button>
  <button class="btn" onclick="startQuiz()" id="startBtn" disabled>‚ñ∂Ô∏è Start Quiz</button>
  <button class="btn btn-back" onclick="window.location.href='dashboard.html'">‚Üê Back</button>
</div>

<script src="quiz.js"></script>
<script>
requireLogin();

let selectedCategory = null;
const gameMode = sessionStorage.getItem('gameMode') || 'classic';

// Update mode badge
const modeInfo = GAME_MODES[gameMode];
document.getElementById('modeBadge').innerHTML = `${modeInfo.icon} ${modeInfo.name} Mode`;

// Generate category grid
const grid = document.getElementById('categoryGrid');
Object.keys(CATEGORIES).forEach(key => {
  const cat = CATEGORIES[key];
  const btn = document.createElement('button');
  btn.className = 'category-btn';
  btn.innerHTML = `
    <span class="cat-icon">${cat.icon}</span>
    <span class="cat-name">${cat.name}</span>
    <span class="cat-count">10 Questions</span>
  `;
  btn.onclick = () => selectCategory(key, btn);
  grid.appendChild(btn);
});

function selectCategory(key, btn){
  selectedCategory = key;
  document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  document.getElementById('startBtn').disabled = false;
}

function startRandom(){
  const keys = Object.keys(CATEGORIES);
  selectedCategory = keys[Math.floor(Math.random() * keys.length)];
  startQuiz();
}

function startQuiz(){
  if(!selectedCategory) return;
  sessionStorage.setItem('quizCategory', selectedCategory);
  sessionStorage.setItem('gameMode', gameMode);
  window.location.href = 'quiz-single.html';
}
</script>
</body>
</html>

