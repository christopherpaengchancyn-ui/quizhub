<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Select Category - Multiplayer</title>
<style>
*{box-sizing:border-box;}
body{font-family:Arial,sans-serif;background:#0f1112;color:#cfc5b8;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;padding:15px;}
.card{background:#24201c;padding:25px;border-radius:14px;width:100%;max-width:500px;text-align:center;box-shadow:0 6px 30px rgba(2,2,2,0.6);}
h2{color:#d9b78a;margin-bottom:5px;font-size:clamp(20px,5vw,24px);}
.subtitle{color:rgba(255,255,255,0.5);font-size:14px;margin-bottom:20px;}
.mode-badge{display:inline-block;padding:5px 12px;border-radius:20px;font-size:12px;margin-bottom:15px;background:linear-gradient(90deg,#b65a8b,#d98ad9);}
.categories{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin:20px 0;}
.category-btn{background:rgba(255,255,255,0.03);padding:18px 12px;border-radius:12px;border:2px solid transparent;color:#cfc5b8;cursor:pointer;transition:all 0.2s;text-align:center;min-height:80px;}
.category-btn:hover{background:rgba(255,255,255,0.08);transform:translateY(-2px);}
.category-btn.selected{border-color:#d98ad9;background:rgba(217,138,217,0.1);}
.cat-icon{font-size:28px;display:block;margin-bottom:6px;}
.cat-name{font-size:13px;font-weight:600;}
.btn{width:100%;padding:14px;margin-top:15px;border-radius:10px;border:none;background:linear-gradient(90deg,#b65a8b,#d98ad9);color:#fff;font-weight:600;cursor:pointer;font-size:16px;transition:transform 0.2s;min-height:48px;}
.btn:hover{transform:scale(1.02);}
.btn:disabled{opacity:0.5;cursor:not-allowed;}
.btn-back{background:#3a3632;margin-top:10px;}
.info{font-size:12px;color:rgba(255,255,255,0.4);margin-top:15px;padding:10px;background:rgba(255,255,255,0.05);border-radius:8px;}
@media(max-width:400px){.card{padding:20px 15px;}.categories{gap:8px;}.category-btn{padding:15px 10px;min-height:70px;}.cat-icon{font-size:24px;}.cat-name{font-size:12px;}.btn{padding:12px;font-size:14px;}.subtitle{font-size:13px;}}
</style>
</head>
<body>
<div class="card">
  <div class="mode-badge" id="modeBadge">üéÆ Classic Mode</div>
  <h2>üë• Multiplayer</h2>
  <p class="subtitle">Choose a category to compete with others</p>

  <div class="categories" id="categoryGrid"></div>

  <button class="btn" onclick="startMultiplayer()" id="startBtn" disabled>üéÆ Find Match</button>
  <button class="btn btn-back" onclick="window.location.href='dashboard.html'">‚Üê Back</button>

  <div class="info">‚è≥ You'll wait in a lobby until another player joins the same category.</div>
</div>

<script src="quiz.js"></script>
<script>
requireLogin();

let selectedCategory = null;
const gameMode = sessionStorage.getItem('gameMode') || 'classic';

// Update mode badge
const modeInfo = GAME_MODES[gameMode];
document.getElementById('modeBadge').innerHTML = `${modeInfo.icon} ${modeInfo.name} Mode`;

// Generate category grid
const grid = document.getElementById('categoryGrid');
Object.keys(CATEGORIES).forEach(key => {
  const cat = CATEGORIES[key];
  const btn = document.createElement('button');
  btn.className = 'category-btn';
  btn.innerHTML = `
    <span class="cat-icon">${cat.icon}</span>
    <span class="cat-name">${cat.name}</span>
  `;
  btn.onclick = () => selectCategory(key, btn);
  grid.appendChild(btn);
});

function selectCategory(key, btn){
  selectedCategory = key;
  document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  document.getElementById('startBtn').disabled = false;
}

function startMultiplayer(){
  if(!selectedCategory) return;
  sessionStorage.setItem('quizDiff', selectedCategory);
  sessionStorage.setItem('quizMode', 'multiplayer');
  sessionStorage.setItem('gameMode', gameMode);
  window.location.href = 'quiz.html';
}
</script>
</body>
</html>
